#!/usr/bin/env groovy

pipeline 
{
	environment
 	{
        	WORKSPACE = "${workspace}"
		JOB_URL="http://ec2-34-245-222-35.eu-west-1.compute.amazonaws.com:8080/job/My_Test_Jobs/job/pipeline_test"
        	LANG="en_US.UTF-8"
   	}	
   
    	agent any 

	stages 
	{	
		
		stage('clean workspace')
		{
			steps
			{
				cleanWs()
			}
		}
		
        	stage('Checkout')
		{ 
        		steps
	 		{
				checkout changelog: false, poll: false, scm: [$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'Mobile_build']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'b83dfd67-c98d-4334-a2c2-4de178bf9cd1', url: 'https://github.com/pradeepvimal/ProjectC.git']]]
			}
		}
		
        	stage('setBuildNumber')
		{
        		steps
			{
				dir ('Mobile_build')
				{
               				//sh 'ruby ../../setBuildNumber.rb ProjectC®-Info.plist ${BUILD_NUMBER}'
					sh 'cat ProjectC®-Info.plist'
				}
            		}
		}
		
	}
}
